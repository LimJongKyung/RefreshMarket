<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.refresh.board.dao.QBoardDAO">
	<insert id="insertConsultationRequest" parameterType="qboard">
	        INSERT INTO requests (
	            consultant_name,
	            consultant_email,
	            consultation_type,
	            consultant_password,
	            consultant_message
	        ) VALUES (
	            #{consultantName},
	            #{consultantEmail},
	            #{consultationType},
	            #{consultantPassword},
	            #{consultantMessage}
	        )
    </insert>
    
    <!-- 게시물 리스트 -->
    <select id="getPosts" resultType="board">
        SELECT POST_ID, TITLE, CONTENT, MEMBER_ID, CREATED_DATE, UPDATED_DATE, VIEW_COUNT, BOARD_TYPE
	    FROM POSTS
	    ORDER BY CREATED_DATE DESC
    </select>
    
    <!-- 게시물 상세 조회 -->
    <select id="getPostById" parameterType="int" resultType="board">
        SELECT POST_ID, TITLE, CONTENT, MEMBER_ID, CREATED_DATE, UPDATED_DATE, VIEW_COUNT, BOARD_TYPE, IMAGE
        FROM POSTS
        WHERE POST_ID = #{postId}
    </select>
    
    <!-- 댓글 목록 조회 (특정 게시글) -->
    <select id="getCommentsByPostId" parameterType="int" resultType="comment">
        SELECT * FROM COMMENTS
        WHERE POST_ID = #{postId}
        ORDER BY NVL(PARENT_ID, COMMENT_ID), COMMENT_ID
    </select>
</mapper>